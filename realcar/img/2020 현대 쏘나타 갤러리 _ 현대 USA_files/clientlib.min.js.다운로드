hma.whyHyundai = function ($) {
  var debounce = hma.utils.debounce;
  var scrollToLink;
  var durationH;
  var updateSectionHeights;
  var whController;

  function whyHyundaiInit() {
    $(document).ready(function () {
      if ($('.wh-main').length > 0) {
        scrollToLink = $('.wh-scroll-to-link');
        durationH = $('.wh-card-list').outerHeight() - window.innerHeight;
        whController = new ScrollMagic.Controller();
        scrollToLink.on('click.setScrollToEl', scrollToEl);
        setScenes();
        $(window).on('resize.resizeWhyHyundai', updateSectionHeights);
      }
    });
  }

  updateSectionHeights = debounce(function () {
    whController = whController.destroy(true);
    $('.wh-parallax-image-container, .wh-parallax-image').removeAttr('style');
    scrollToLink.off('click.setScrollToEl');
    $(window).off('resize.resizeWhyHyundai');
    durationH = $('.wh-card-list').outerHeight() - window.innerHeight;
    whyHyundaiInit();
  }, 250);

  function setScenes() {
    setCardPins();
    overviewAnimation();
    cardImageAnimationTweenLeave('triggerCardAnimation1', 'philanthropy');
    cardImageAnimationTweenEnter('triggerCardAnimation1', 'madeInAmerica');
    cardImageAnimationTweenLeave('triggerCardAnimation2', 'madeInAmerica');
    cardImageAnimationTweenEnter('triggerCardAnimation2', 'happyDrivers');
    cardImageAnimationTweenLeave('triggerCardAnimation3', 'happyDrivers');
    cardImageAnimationTweenEnter('triggerCardAnimation3', 'buildingForTomorrow');
    setSideNavPoints('whOverview');
    setSideNavPoints('philanthropy');
    setSideNavPoints('madeInAmerica');
    setSideNavPoints('happyDrivers');
    setSideNavPoints('buildingForTomorrow');
    toggleSideNavPosition();
    lastSectionPin();
  }

  function overviewAnimation() {
    /* eslint-disable */
    var tween = TweenMax.fromTo("#philanthropy .wh-parallax-image", 1, {
      transform: 'translateY(-110px)'
    }, {
      transform: 'translateY(0px)'
    });
    var scene = new ScrollMagic.Scene({
      triggerElement: document.getElementById('triggerOverviewAnimation'),
      triggerHook: 0,
      duration: $('#whOverview').outerHeight()
    }).setTween(tween).addTo(whController);
  }

  function cardImageAnimationTweenEnter(triggerId, sectionEnter) {
    /* eslint-disable */
    var tweenLeave = TweenMax.fromTo("#".concat(sectionEnter, " .wh-parallax-image-container"), 1, {
      transform: 'translate(-100%, 0)'
    }, {
      transform: 'translate(0%, 0)'
    });
    var scene = new ScrollMagic.Scene({
      triggerElement: document.getElementById(triggerId),
      triggerHook: 0,
      duration: $("#".concat(triggerId)).height()
    }).setTween(tweenLeave).addTo(whController);
  }

  function cardImageAnimationTweenLeave(triggerId, sectionLeave) {
    /* eslint-disable */
    var tweenLeave = TweenMax.staggerTo("#".concat(sectionLeave, " .wh-parallax-image-container"), 1, {
      transform: 'translate(100%, 0)'
    }, 0.4);
    var scene = new ScrollMagic.Scene({
      triggerElement: document.getElementById(triggerId),
      triggerHook: 0,
      duration: $("#".concat(triggerId)).height() + 50
    }).setTween(tweenLeave).addTo(whController);
  }

  function setCardPins() {
    new ScrollMagic.Scene({
      triggerElement: document.getElementById('triggerSetCardPins'),
      triggerHook: 0,
      duration: durationH
    }).setClassToggle('.wh-parallax-image-fix', 'wh-parallax-fixed').on('enter', function () {
      $('#philanthropy .wh-parallax-image').css('transform', 'none');
      $('.wh-parallax-image-fix').last().removeClass('scrolled-beyond-card-list');
    }).on('leave', function () {
      // specific to last card
      $('.wh-parallax-image-fix').last().addClass('scrolled-beyond-card-list');
    }).addTo(whController);
  }

  function lastSectionPin() {
    new ScrollMagic.Scene({
      triggerElement: document.getElementById('triggerEndOfBuild'),
      triggerHook: 0
    }).setClassToggle('#buildingForTomorrow .wh-parallax-image-fix', 'scrolled-beyond-card-list').addTo(whController);
  }

  function setSideNavPoints(cardId) {
    var sectionHeight = $("#".concat(cardId)).outerHeight();
    new ScrollMagic.Scene({
      triggerElement: "#".concat(cardId),
      triggerHook: 0,
      duration: sectionHeight
    }).setClassToggle("#".concat(cardId, "NavDot"), 'active-section').addTo(whController);
  }

  function scrollToEl(event) {
    event.preventDefault();
    var elHref = $(this).attr('href').split('#')[1];
    var isXlAndHasImage = $(document).width() >= 1023 && $("#".concat(elHref)).hasClass('wh-card');
    var elTop = isXlAndHasImage ? $("#".concat(elHref)).offset().top + 250 : $("#".concat(elHref)).offset().top;
    $('html, body').animate({
      scrollTop: elTop
    }, 1000);
  }

  function toggleSideNavPosition() {
    var triggerEl = $('.wh-card-list').next();
    new ScrollMagic.Scene({
      triggerElement: '#whTriggerSideNavPos',
      triggerHook: 1
    }).setClassToggle(".wh-side-nav", 'wh-side-nav-abs').addTo(whController);
  }

  return {
    init: whyHyundaiInit
  };
}(jQuery);

hma.whyHyundai.init();
hma.madeInAmerica = function ($) {
  var $doc = $(document);
  var pageHeading = $('.made-in-america-topic-heading').outerHeight(true);
  var controller = new ScrollMagic.Controller();

  function madeInAmericaInit() {
    $doc.ready(function () {
      if ($('.made-in-america-topic-container').length === 0) {
        return;
      }

      heroImageAnimation();
      pinHeroImage();
      heroImageFade();
      heroImageHide();
    });
  }

  function heroImageAnimation() {
    /* eslint-disable */
    var tween = TweenMax.fromTo('.made-in-america-topic-hero-image', 1, {
      transform: 'scale(0.9)'
    }, {
      transform: 'scale(1)'
    });
    new ScrollMagic.Scene({
      triggerElement: document.getElementsByClassName('made-in-america-topic-hero-image'),
      triggerHook: 0,
      duration: pageHeading
    }).setTween(tween).addTo(controller);
  }

  function pinHeroImage() {
    new ScrollMagic.Scene({
      triggerElement: '.made-in-america-topic-hero-image',
      triggerHook: 0
    }).setClassToggle('.made-in-america-topic-hero-image-container', 'made-in-america-topic-body-dark').setPin('.made-in-america-topic-hero-image').addTo(controller);
  }

  function heroImageFade() {
    var tmpImg = new Image();
    tmpImg.src = $('.made-in-america-topic-hero-image img').attr('src'); // Wait for image to load before determining its height

    tmpImg.onload = function () {
      var heroImageHeight = $('.made-in-america-topic-hero-image-container').outerHeight(true);
      /* eslint-disable */

      var tween = TweenMax.fromTo('.made-in-america-topic-hero-image', 1, {
        opacity: 1
      }, {
        opacity: 0.3
      });
      new ScrollMagic.Scene({
        triggerElement: document.getElementById('triggerMadeInAmericaImageOpacity'),
        triggerHook: 0,
        duration: heroImageHeight
      }).setTween(tween).addTo(controller);
    };
  }

  function heroImageHide() {
    new ScrollMagic.Scene({
      triggerElement: '.made-in-america-topic-body-padding',
      triggerHook: 0
    }).setClassToggle('.made-in-america-topic-hero-image', 'made-in-america-topic-hide-hero-image').addTo(controller);
  }

  return {
    init: madeInAmericaInit
  };
}(jQuery);

hma.madeInAmerica.init();

hma.chTopicPage = function ($) {
  var $doc = $(document);
  var pageHeading = $('.ch-hero-heading').outerHeight(true);
  var controller = new ScrollMagic.Controller();

  function chTopicPageInit() {
    $doc.ready(function () {
      if ($('.ch-hero').length === 0) {
        return;
      }

      heroImageAnimation();
      pinHeroImage();
      heroImageFade();
      heroImageHide();
    });
  }

  function heroImageAnimation() {
    /* eslint-disable */
    var tween = TweenMax.fromTo('.ch-hero-image', 1, {
      transform: 'scale(0.9)'
    }, {
      transform: 'scale(1)'
    });
    new ScrollMagic.Scene({
      triggerElement: document.getElementsByClassName('ch-hero-image'),
      triggerHook: 0,
      duration: pageHeading
    }).setTween(tween).addTo(controller);
  }

  function pinHeroImage() {
    new ScrollMagic.Scene({
      triggerElement: '.ch-hero-image',
      triggerHook: 0
    }).setClassToggle('.ch-hero-image-container', 'ch-hero-image-container-dark').setPin('.ch-hero-image').addTo(controller);
  }

  function heroImageFade() {
    var tmpImg = new Image();
    tmpImg.src = $('.ch-hero-image img').attr('src'); // Wait for image to load before determining its height

    tmpImg.onload = function () {
      var heroImageHeight = $('.ch-hero-image-container').outerHeight(true);
      /* eslint-disable */

      var tween = TweenMax.fromTo('.ch-hero-image', 1, {
        opacity: 1
      }, {
        opacity: 0.3
      });
      new ScrollMagic.Scene({
        triggerElement: document.getElementById('triggerContentHubHeroImageOpacity'),
        triggerHook: 0,
        duration: heroImageHeight
      }).setTween(tween).addTo(controller);
    };
  }

  function heroImageHide() {
    new ScrollMagic.Scene({
      triggerElement: '.ch-body-content',
      triggerHook: 0
    }).setClassToggle('.ch-hero-image', 'ch-hero-image-hide').addTo(controller);
  }

  return {
    init: chTopicPageInit
  };
}(jQuery);

hma.chTopicPage.init();

hma.happyDrivers = function ($) {
  var $doc = $(document);
  var pageHeading = $('.happy-drivers-topic-heading').outerHeight(true);
  var controller = new ScrollMagic.Controller();

  function happyDriversInit() {
    $doc.ready(function () {
      if ($('.happy-drivers-topic-container').length === 0) {
        return;
      }

      heroImageAnimation();
      pinHeroImage();
      heroImageFade();
      heroImageHide();
    });
  }

  function heroImageAnimation() {
    /* eslint-disable */
    var tween = TweenMax.fromTo('.happy-drivers-topic-hero-image', 1, {
      transform: 'scale(0.9)'
    }, {
      transform: 'scale(1)'
    });
    new ScrollMagic.Scene({
      triggerElement: document.getElementsByClassName('happy-drivers-topic-hero-image'),
      triggerHook: 0,
      duration: pageHeading
    }).setTween(tween).addTo(controller);
  }

  function pinHeroImage() {
    new ScrollMagic.Scene({
      triggerElement: '.happy-drivers-topic-hero-image',
      triggerHook: 0
    }).setClassToggle('.happy-drivers-topic-hero-image-container', 'happy-drivers-topic-body-dark').setPin('.happy-drivers-topic-hero-image').addTo(controller);
  }

  function heroImageFade() {
    var tmpImg = new Image();
    tmpImg.src = $('.happy-drivers-topic-hero-image').attr('src'); // Wait for image to load before determining its height

    tmpImg.onload = function () {
      var heroImageHeight = $('.happy-drivers-topic-hero-image-container').outerHeight(true);
      /* eslint-disable */

      var tween = TweenMax.fromTo('.happy-drivers-topic-hero-image', 1, {
        opacity: 1
      }, {
        opacity: 0.3
      });
      new ScrollMagic.Scene({
        triggerElement: document.getElementById('triggerHappyDriversImageOpacity'),
        triggerHook: 0,
        duration: heroImageHeight
      }).setTween(tween).addTo(controller);
    };
  }

  function heroImageHide() {
    new ScrollMagic.Scene({
      triggerElement: '.happy-drivers-topic-body-padding',
      triggerHook: 0
    }).setClassToggle('.happy-drivers-topic-hero-image', 'happy-drivers-topic-hide-hero-image').addTo(controller);
  }

  return {
    init: happyDriversInit
  };
}(jQuery);

hma.happyDrivers.init();

